<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<!-- 공통 header -->
<div th:replace="fragments/header.html::fragment-header"></div>

<body>

<!-- 공통 navigation-->
<div th:replace="fragments/nav.html::fragment-nav(${user})"></div>

</br>
</br>

<section id="services" class="services section-bg">
    <div class="container position-relative" data-aos="fade-up" data-aos-delay="100">

        <div class="section-title">
            <h2>가상환경 생성하기</h2>
        </div>

        <div id="loading" class="loading" style="display: none;">
            <img src="/assets/p2k_logo_b.png" alt="loading">
        </div>

        <div>
            <input type="hidden" class="error" th:if="${vmError.errorMsg == 'true'}" th:value="true">
            <input type="hidden" class="error" th:unless="${vmError.errorMsg == 'true'}" th:value="false">
        </div>

        <div class="row icon-boxes d-flex justify-content-center">
            <div class="col-md-6 aos-init aos-animate mb-5 mb-lg-0" data-aos="zoom-in" data-aos-delay="200">
                <div class="icon-box">
                    <form th:action="@{/vm/create}" th:object="${vm}" method="post" style="text-align: center;" class="m-auto center-block" id="create">

                        <div class="mb-4 row justify-content-center">
                            <label for="name" class="col-sm-4 col-form-label" style="font-weight: bolder;">이름</label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="name" th:field="*{vmname}" placeholder="이름" required>
                            </div>
                        </div>

                        <div class="mb-4 row justify-content-center">
                            <label for="name" class="col-sm-4 col-form-label" style="font-weight: bolder;">설명</label>
                            <div class="col-sm-4">
                                <textarea type="text" class="form-control" id="description" th:field="*{description}" placeholder="설명" required></textarea>
                            </div>
                        </div>

                        <div class="m-4 row justify-content-center">
                            <label for="password" class="col-sm-4 col-form-label" style="font-weight: bolder;">비밀번호</label>
                            <div class="col-sm-5">
                                <input type="password" class="form-control" id="password" th:field="*{password}" placeholder="비밀번호" required>
                            </div>
                        </div>

                        <div class="m-4 row justify-content-center">
                            <label class="col-sm-4 col-form-label" style="font-weight: bolder;">공개 범위
                                <img src="/assets/question-mark.png" style="width: 20px; height: 20px;" title="공개 범위는 다른 사용자들에게 가상환경을 공개하는 범위를 말합니다. 전체공개 시 모든 사용자가 접속을 할 수 있고, 비공개 시 생성자만 접속 가능합니다.">
                            </label>
                            <div class="col-sm-5">
                                전체공개 <input type="radio" class="radio-scope" name="scope" th:field="*{scope}" th:value="true" required>
                                비공개 <input type="radio" class="radio-scope" name="scope" checked th:field="*{scope}" th:value="false">
                            </div>
                        </div>

                        <div class="m-4 row justify-content-center">
                            <label class="col-sm-4 col-form-label" style="font-weight: bolder;">접속자 권한 범위
                                <img src="/assets/question-mark.png" style="width: 20px; height: 20px;" title="접속자 권한 범위는 전체 공개로 설정했을 시에 접속자의 제어 여부를 나타냅니다. 제어 가능은 접속자도 가상환경을 제어할 수 있고, 보기만 가능은 접속자는 가상환경을 제어하지 못하고 관전만 가능합니다.">
                            </label>
                            <div class="col-sm-5">
                                <label>제어 가능 <input type="radio" class="radio-control" name="control" th:field="*{control}" th:value="true" required></label>&nbsp;
                                <label>보기만 가능 <input type="radio" class="radio-control" name="control" checked th:field="*{control}" th:value="false"></label>&nbsp;
                            </div>
                        </div>


                        <button class="mt-5 btn btn-lg btn-main btn" type="submit" id="create-btn">생성하기</button>
                    </form>
                </div>
            </div>


        </div>
    </div>
</section><!-- End Hero -->


<!-- Page content-->
<!--<section id="pricing" class="pricing">-->
<!--    <div class="container" data-aos="fade-up">-->
<!--        <div class="section-title">-->
<!--            <h2>가상환경 생성하기</h2>-->
<!--        </div>-->
<!--                    <form th:action="@{/vm/create}" th:object="${vm}" method="post" style="text-align: center;" class="border m-auto center-block w-75 bg-light">-->
<!--                        <div class="m-4">-->
<!--                            <label style="font-weight: bolder;">이름 &nbsp; <input type="text" name="name" th:field="*{vmname}" required></label>-->
<!--                        </div>-->
<!--                        <div class="m-4">-->
<!--                            <label style="font-weight: bolder;">비밀번호 &nbsp; <input type="password" name="name" th:field="*{password}" required></label>-->
<!--                        </div>-->
<!--                        <div class="m-4"> <span style="font-weight: bolder;">공개 범위 &nbsp; &nbsp;</span>-->
<!--                            <label>전체공개 <input type="radio" name="scope" th:field="*{scope}" th:value="false"></label>-->
<!--                            <label>비공개 <input type="radio" name="scope" checked th:field="*{scope}" th:value="true"></label>-->
<!--                        </div>-->
<!--                        <div class="m-4"> <span style="font-weight: bolder;">접속자 권한 범위 &nbsp; &nbsp;</span>-->
<!--                            <label>제어 가능 <input type="radio" name="control" th:field="*{control}" th:value="false"></label>-->
<!--                            <label>보기만 가능 <input type="radio" name="control" checked th:field="*{control}" th:value="true"></label>-->
<!--                        </div>-->

<!--                        <button class="mb-5 btn btn-lg btn-primary" type="submit" id="create-btn">생성하기</button>-->
<!--                    </form>-->
<!--        </div>-->
<!--    </div>-->
<!--</section>-->


<!-- 공통 footer -->
<div th:replace="fragments/footer.html::fragment-footer"></div>

<!-- 공통 script -->
<div th:replace="fragments/script.html::fragment-script"></div>
<script th:inline="javascript">

    // $(window).load(function() {
    //     // 로딩되기 시작할때
    //     $('.loading').css("display", "none");
    // });

    $(document).ready(function() {
        //console.log("error ", $('.error').val());
        if ($('.error').val() == 'true' ) {
            Swal.fire({
                title: '가상환경은 최대 3개 생성할 수 있습니다.',
                confirmButtonColor: '#2487ce',
                confirmButtonText: '확인'
            });
        }
    });

    // $(function() {
    //     // 로딩될때
    // });

    $('.radio-scope').click(function() {
        var val = $('.radio-scope:checked').val(); // 체크된 Radio 버튼의 값을 가져옵니다.

        if ( val == 'false' ) {
            $('.radio-control').attr('disabled', true);
        } else {
            $('.radio-control').attr('disabled', false);
        }
    });

    function alert(port) {

        Swal.fire({
            title : "생성하시겠습니까?",
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: '생성',
            cancelButtonText: '취소'
        }).then((result) => {
            if(result.isConfirmed) {
                location.href = "http://www.webdesktop.p2kcloud.com:"+port;
            }
        })
    }
</script>
</body>

</html>